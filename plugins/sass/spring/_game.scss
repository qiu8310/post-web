@keyframes box-left-ani {
  0%  { transform: translate(  0%,  0%); opacity: 1; }
  25% { transform: translate( 50%, -6%); opacity: .8; }
  50% { transform: translate(100%,  0%); opacity: 1; }
  75% { transform: translate( 50%,  6%); opacity: .8; }
}
@keyframes box-right-ani {
  0%  { transform: translate(  0%,  0%); opacity: 1; }
  25% { transform: translate(-50%,  6%); opacity: .8; }
  50% { transform: translate(-100%, 0%); opacity: 1; }
  75% { transform: translate(-50%, -6%); opacity: .8; }
}
@keyframes ani-star {
  0%  { transform: scale(1); }
  50% { transform: scale(0.8); }
}
@keyframes ani-pink-eyes {
  0%  { opacity: 0; }
  10% { opacity: 1; }
  14% { opacity: 0; }
  56% { opacity: 1; }
  60% { opacity: 0; }
}
@keyframes ani-white-eyes {
  0% { opacity: 1; }
  4% { opacity: 0; }
}
@keyframes ani-gift-box {
  0% { transform: none; }
  15% {
    transform: rotate(4deg) translateZ(0px);
    transform-origin: right bottom;
  }
  18% {
    transform: rotate(5deg) translateY(-5px) translateZ(0px);
    transform-origin: right bottom;
  }
  21% {
    transform: none;
  }
  69% {
    transform: rotate(-5deg) translateY(-5px) translateZ(0px);
    transform-origin: left bottom;
  }
  72% {
    transform: rotate(-4deg) translateZ(0px);
    transform-origin: left bottom;
  }
  75% {
    transform: none;
  }
  94% {
    transform: rotate(-5deg) translateY(-5px) translateZ(0px);
    transform-origin: left bottom;
  }
  97% {
    transform: rotate(4deg) translateZ(0px);
    transform-origin: right bottom;
  }
}



.game-ani {
  width: 320px;
  position: absolute;
  z-index: 10;
  top: 138px;
  left: 50%;
  transform: translateX(-50%);
  transform-origin: center top;
  @include bg('spring/game-card-bg', 0.5);

  .box {
    width: image-width-ratio('spring/game/left', 0.5);
    height: image-height-ratio('spring/game/left', 0.5);
  }


  .box-left {
    animation: box-left-ani linear .4s 5;
  }
  .box-right {
    animation: box-right-ani linear .4s 5;
    .front {
      @include sprite-2x-pos(right, 'spring/game');
    }
  }

  .front, .back { @include sprite-2x(left, block, 'spring/game'); }

  .prize-no    .back { @include sprite-2x-pos(prize-no,   'spring/game'); }
  .prize-red   .back { @include sprite-2x-pos(prize-red,  'spring/game'); }
  .prize-green .back { @include sprite-2x-pos(prize-green,'spring/game'); }
  .prize-blue  .back { @include sprite-2x-pos(prize-blue, 'spring/game'); }
}

.spring-game-ctrl {
  .slogan {
    height: 126px;
  }
}

.spring-game-error-ctrl {
  .slogan { padding-left: 23px; padding-right: 23px; }
  .audio { @include sprite-2x(play, block, 'spring/game'); }
  .playing.audio {
    @include sprite-2x-pos(pause, 'spring/game');
  }
}

$star: "../images/spring/star.svg";

.share-tip {
  @include bg('spring/share-tip', 0.5, right top);
  @include size(320px 100%);
  margin: 0 auto;
}


.prize {
  position: relative;
  @include size(320px 284px);

  .bg {
    @include size(100%);
    .back {
      position: absolute;
      top: 29px;

      // height: 252px;  向上剪到 511px，向下剪到 504px
      @include sprite-2x(prize-bg, true, 'spring/sp');
    }
    .decorate {
      position: absolute;
      top: 128px;
      @include sprite-2x(prize-decorate, true, 'spring/sp');
    }
  }
  &.opened {
    .bg .back {
      display: none;
    }
  }


  .star {
    position: absolute;
    @include size(30px, block);
    overflow: visible;
    transform-origin: center center;
  }

  .star-a {
    top: 57px;
    right: 46px;
    background: url($star) no-repeat;
    background-size: 30px 30px;
    animation: ani-star step-end .2s infinite .1s;
  }

  .star-b {
    left: 50px;
    top: 231px;
    background: url($star) no-repeat;
    background-size: 24px 24px;
    animation: ani-star step-end .2s infinite;
  }

  .eyes {
    &::before, &::after {
      content: '';
      @include size(5px, block, true);
      position: absolute;
      z-index: 20;
    }
  }

  .eyes-pink {
    animation: ani-pink-eyes step-end 3s infinite;
    &::before, &::after {
      background: #ffb3b3;
    }
    &::before {
      left: 77px;
      top: 181px;
    }
    &::after {
      left: 57px;
      top: 194px;
    }
  }

  .eyes-white {
    animation: ani-white-eyes step-end 3s infinite;
    &::before, &::after {
      background: #f0f0f0;
    }
    &::before {
      right: 50px;
      top: 149px;
    }
    &::after {
      right: 68px;
      top: 145px;
    }
  }

  .gift {
    position: absolute;
    top: 21px;
    left: 72px;
    @include sprite-2x(red, true, 'spring/sp');
    animation: ani-gift-box step-end 3s infinite;
  }

  &.prize-blue .gift { @include sprite-2x-pos(blue, 'spring/sp'); }
  &.prize-green .gift { @include sprite-2x-pos(green, 'spring/sp'); }
  &.opened {
    height: 215px;
    .bg {
      transform: scale(.79);
    }
    .star-a {
      top: 50px;
      right: 53px;
      background: url($star) no-repeat;
      background-size: 24px 24px;
    }
    .star-b {
      left: 76px;
      top: 127px;
      background: url($star) no-repeat;
      background-size: 18px 18px;
    }
    .gift {
      top: 3px;
      left: 60px;
      animation: open-ani step-end .6s infinite;
    }
  }
}

.spring-prize-ctrl .prize.opened {
  margin-top: 2px;
}


@keyframes open-ani {
  0%  { @include sprite-2x(1, true, 'spring/open'); }
  17% { @include sprite-2x(2, true, 'spring/open'); }
  33% { @include sprite-2x(3, true, 'spring/open'); }
  50% { @include sprite-2x(4, true, 'spring/open'); }
  67% { @include sprite-2x(3, true, 'spring/open'); }
  83% { @include sprite-2x(2, true, 'spring/open'); }
}
